{"version":3,"sources":["../../server/routes/index.js"],"names":["router","Router","get","req","res","next","render","title","db","collection","find","then","doc","restaurants","e","docs","post","userName","body","username","userEmail","useremail","insert","err","send","redirect","module","exports"],"mappings":";;AAAA;;;;;;AAEA,IAAIA,SAAS,kBAAQC,MAAR,EAAb;;AAEA;AACAD,OAAOE,GAAP,CAAW,GAAX,EAAgB,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAClCD,MAAIE,MAAJ,CAAW,OAAX,EAAoB;AAClBC,WAAO;AADW,GAApB;AAGD,CAJD;;AAMA;AACAP,OAAOE,GAAP,CAAW,SAAX,EAAsB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAClC,MAAII,KAAKL,IAAIK,EAAb;AACA,MAAIC,aAAaD,GAAGN,GAAH,CAAO,aAAP,CAAjB;AACAO,aAAWC,IAAX,GAAkBC,IAAlB,CAAuB,UAACC,GAAD,EAAS;AAC9BR,QAAIE,MAAJ,CAAW,QAAX,EAAqB,EAAEO,aAAaD,GAAf,EAArB;AACD,GAFD;AAGD,CAND;;AAQA;AACAZ,OAAOE,GAAP,CAAW,WAAX,EAAwB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACpC,MAAII,KAAKL,IAAIK,EAAb;AACA,MAAIC,aAAaD,GAAGN,GAAH,CAAO,gBAAP,CAAjB;AACAO,aAAWC,IAAX,CAAgB,EAAhB,EAAoB,EAApB,EAAwB,UAACI,CAAD,EAAIC,IAAJ,EAAa;AACnCX,QAAIE,MAAJ,CAAW,UAAX,EAAuB;AACrB,kBAAaS;AADQ,KAAvB;AAGD,GAJD;AAKD,CARD;;AAUA;AACAf,OAAOE,GAAP,CAAW,UAAX,EAAuB,UAACC,GAAD,EAAMC,GAAN,EAAc;AACnCA,MAAIE,MAAJ,CAAW,SAAX,EAAsB,EAAEC,OAAO,cAAT,EAAtB;AACD,CAFD;;AAIA;AACAP,OAAOgB,IAAP,CAAY,UAAZ,EAAwB,UAACb,GAAD,EAAMC,GAAN,EAAc;AACpC,MAAII,KAAKL,IAAIK,EAAb;;AAEA,MAAIS,WAAWd,IAAIe,IAAJ,CAASC,QAAxB;AACA,MAAIC,YAAYjB,IAAIe,IAAJ,CAASG,SAAzB;;AAEA,MAAIZ,aAAaD,GAAGN,GAAH,CAAO,gBAAP,CAAjB;;AAEAO,aAAWa,MAAX,CAAkB;AAChB,gBAAaL,QADG;AAEhB,iBAAcG;AAFE,GAAlB,EAGG,UAACG,GAAD,EAAMX,GAAN,EAAc;AACf,QAAGW,GAAH,EAAQ;AACNnB,UAAIoB,IAAJ,CAAS,6DAAT;AACD,KAFD,MAGK;AACHpB,UAAIqB,QAAJ,CAAa,UAAb;AACD;AACF,GAVD;AAWD,CAnBD;;AAqBAC,OAAOC,OAAP,GAAiB3B,MAAjB","file":"index.js","sourcesContent":["import express from 'express';\n\nlet router = express.Router();\n\n/* GET home page. */\nrouter.get('/', (req, res, next) => {\n  res.render('index', {\n    title: 'Lunchabler'\n  });\n});\n\n/* GET Search page. */\nrouter.get('/search', (req, res) => {\n  let db = req.db;\n  let collection = db.get('restaurants');\n  collection.find().then((doc) => {\n    res.render('search', { restaurants: doc });\n  });\n});\n\n/* GET User list page */\nrouter.get('/userlist', (req, res) => {\n  let db = req.db;\n  let collection = db.get('usercollection');\n  collection.find({}, {}, (e, docs) => {\n    res.render('userlist', {\n      \"userlist\" : docs\n    });\n  });\n});\n\n/* GET Add User page */\nrouter.get('/newuser', (req, res) => {\n  res.render('newuser', { title: 'Add new user' });\n});\n\n/* POST to Add User Service */\nrouter.post('/adduser', (req, res) => {\n  let db = req.db;\n\n  let userName = req.body.username;\n  let userEmail = req.body.useremail;\n\n  let collection = db.get('usercollection');\n\n  collection.insert({\n    \"username\" : userName,\n    \"useremail\" : userEmail\n  }, (err, doc) => {\n    if(err) {\n      res.send(\"There was a problem adding the information to the database.\");\n    }\n    else {\n      res.redirect(\"userlist\");\n    }\n  });\n});\n\nmodule.exports = router;\n"]}